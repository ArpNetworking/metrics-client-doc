{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "definitions": {
    "unit": {
      "type": "string",
      "enum": [
        "nanosecond",
        "microsecond",
        "millisecond",
        "second",
        "minute",
        "hour",
        "day",
        "week",
        "bit",
        "decabit",
        "hectobit",
        "kilobit",
        "megabit",
        "gigabit",
        "terabit",
        "petabit",
        "exabit",
        "zettabit",
        "yottabit",
        "kibibit",
        "mebibit",
        "gibibit",
        "tebibit",
        "pebibit",
        "exbibit",
        "zebibit",
        "yobibit",
        "byte",
        "decabyte",
        "hectobyte",
        "kilobyte",
        "megabyte",
        "gigabyte",
        "terabyte",
        "petabyte",
        "exabyte",
        "zettabyte",
        "yottabyte",
        "kibibyte",
        "mebibyte",
        "gibibyte",
        "tebibyte",
        "pebibyte",
        "exbibyte",
        "zebibyte",
        "yobibyte",
        "rotation",
        "degree",
        "radian",
        "celsius",
        "fahrenheit",
        "kelvin"
      ]
    },
    "sample": {
      "type": "object",
      "properties": {
        "unitNumerators": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/unit"
          }
        },
        "unitDenominators": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/unit"
          }
        },
        "value": {
          "type": "number"
        }
      },
      "required": [
        "value"
      ],
      "additionalProperties": false
    },
    "metric": {
      "type": "object",
      "properties": {
        "values": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/sample"
          }
        }
      },
      "required": [
        "values"
      ],
      "additionalProperties": false
    },
    "metricsList": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/metric"
      }
    }
  },
  "title": "Query Log",
  "description": "log file entry for ingestion by metrics aggregator daemon",
  "type": "object",
  "properties": {
    "id": {
      "type": "string"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "dimensions": {
      "type": "object",
      "properties": {          
        "host": {
          "type": "string"
        },
        "service": {
          "type": "string"
        },
        "cluster": {
          "type": "string"
        }
      },
      "required": [
        "host",
        "service",
        "cluster"
      ],
      "additionalProperties": {
        "type": "string"
      }
    },
    "annotations": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "counters": {
      "$ref": "#/definitions/metricsList"
    },
    "gauges": {
      "$ref": "#/definitions/metricsList"
    },
    "timers": {
      "$ref": "#/definitions/metricsList"
    },
    "version": {
      "type": "string",
      "pattern": "^2g$"
    }
  },
  "required": [
    "dimensions",
    "annotations",
    "date",
    "id",
    "version"
  ]
}
